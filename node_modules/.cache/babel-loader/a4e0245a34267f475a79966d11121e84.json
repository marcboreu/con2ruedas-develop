{"ast":null,"code":"var _jsxFileName = \"/Users/marcboreu/Desktop/Webs - Develop/test app/con2ruedas/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport Navbar from \"./Navbar\";\nimport { Redirect } from \"@reach/router\";\nimport Loader from \"../loader.gif\";\nimport axios from 'axios';\nimport clientConfig from '../client-config';\nimport AppContext from \"./context/AppContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [store, setStore] = useContext(AppContext);\n  const [loginFields, setLoginFields] = useState({\n    username: '',\n    password: '',\n    userNiceName: '',\n    userEmail: '',\n    loading: false,\n    error: ''\n  });\n\n  const createMarkup = data => ({\n    __html: data\n  });\n\n  const onFormSubmit = event => {\n    event.preventDefault();\n    const siteUrl = clientConfig.siteUrl;\n    const loginData = {\n      username: loginFields.username,\n      password: loginFields.password\n    };\n    setLoginFields({ ...loginFields,\n      loading: true\n    });\n    axios.post(`${siteUrl}/wp-json/jwt-auth/v1/token`, loginData).then(res => {\n      if (undefined === res.data.token) {\n        setLoginFields({ ...loginFields,\n          error: res.data.message,\n          loading: false\n        });\n        return;\n      }\n\n      const {\n        token,\n        user_nicename,\n        user_email\n      } = res.data;\n      localStorage.setItem('token', token);\n      localStorage.setItem('userName', user_nicename);\n      setStore({ ...store,\n        userName: user_nicename,\n        token: token\n      });\n      setLoginFields({ ...loginFields,\n        loading: false,\n        token: token,\n        userNiceName: user_nicename,\n        userEmail: user_email\n      });\n    }).catch(err => {\n      setLoginFields({ ...loginFields,\n        error: err.response.data.message,\n        loading: false\n      });\n    });\n  };\n\n  const handleOnChange = event => {\n    setLoginFields({ ...loginFields,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const {\n    username,\n    password,\n    userNiceName,\n    error,\n    loading\n  } = loginFields;\n\n  if (store.token) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: `/dashboard`,\n      noThrow: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '100vh',\n          maxWidth: '400px',\n          margin: '0 auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"mb-4\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 6\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger\",\n          dangerouslySetInnerHTML: createMarkup(error)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: onFormSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-group\",\n            children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"username\",\n              value: username,\n              onChange: handleOnChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-group\",\n            children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"form-control\",\n              name: \"password\",\n              value: password,\n              onChange: handleOnChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary mb-3\",\n            type: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 7\n          }, this), loading && /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"loader\",\n            src: Loader,\n            alt: \"Loader\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 20\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }, this);\n  }\n};\n\n_s(Login, \"WpqwmUHIgCPOs5H2humM2iz+Dls=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/marcboreu/Desktop/Webs - Develop/test app/con2ruedas/src/components/Login.js"],"names":["React","useContext","useState","Navbar","Redirect","Loader","axios","clientConfig","AppContext","Login","store","setStore","loginFields","setLoginFields","username","password","userNiceName","userEmail","loading","error","createMarkup","data","__html","onFormSubmit","event","preventDefault","siteUrl","loginData","post","then","res","undefined","token","message","user_nicename","user_email","localStorage","setItem","userName","catch","err","response","handleOnChange","target","name","value","height","maxWidth","margin"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport Navbar from \"./Navbar\";\nimport { Redirect } from \"@reach/router\";\nimport Loader from \"../loader.gif\";\nimport axios from 'axios';\nimport clientConfig from '../client-config';\nimport AppContext from \"./context/AppContext\";\n\nconst Login = () =>  {\n\n\tconst [ store, setStore ] = useContext( AppContext );\n\n\tconst [ loginFields, setLoginFields ] = useState({\n\t\tusername: '',\n\t\tpassword: '',\n\t\tuserNiceName: '',\n\t\tuserEmail: '',\n\t\tloading: false,\n\t\terror: ''\n\t});\n\n\tconst createMarkup = ( data ) => ({\n\t\t__html: data\n\t});\n\n\tconst onFormSubmit = ( event ) => {\n\t\tevent.preventDefault();\n\n\t\tconst siteUrl = clientConfig.siteUrl;\n\n\t\tconst loginData = {\n\t\t\tusername: loginFields.username,\n\t\t\tpassword: loginFields.password,\n\t\t};\n\n\t\tsetLoginFields( { ...loginFields, loading: true } );\n\n\t\taxios.post( `${siteUrl}/wp-json/jwt-auth/v1/token`, loginData )\n\t\t\t.then( res => {\n\n\t\t\t\tif ( undefined === res.data.token ) {\n\t\t\t\t\tsetLoginFields( {\n\t\t\t\t\t\t...loginFields,\n\t\t\t\t\t\terror: res.data.message,\n\t\t\t\t\t\tloading: false }\n\t\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { token, user_nicename, user_email } = res.data;\n\n\t\t\t\tlocalStorage.setItem( 'token', token );\n\t\t\t\tlocalStorage.setItem( 'userName', user_nicename );\n\n\t\t\t\tsetStore({\n\t\t\t\t\t...store,\n\t\t\t\t\tuserName: user_nicename,\n\t\t\t\t\ttoken: token\n\t\t\t\t});\n\n\t\t\t\tsetLoginFields( {\n\t\t\t\t\t...loginFields,\n\t\t\t\t\tloading: false,\n\t\t\t\t\ttoken: token,\n\t\t\t\t\tuserNiceName: user_nicename,\n\t\t\t\t\tuserEmail: user_email,\n\t\t\t\t} )\n\t\t\t} )\n\t\t\t.catch( err => {\n\t\t\t\tsetLoginFields( { ...loginFields, error: err.response.data.message, loading: false } );\n\t\t\t} )\n\t};\n\n\tconst handleOnChange = ( event ) => {\n\t\tsetLoginFields( { ...loginFields, [event.target.name]: event.target.value } );\n\t};\n\n\n\tconst { username, password, userNiceName, error, loading } = loginFields;\n\n\tif ( store.token ) {\n\t\treturn ( <Redirect to={`/dashboard`} noThrow /> )\n\t} else {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Navbar/>\n\t\t\t\t<div style={{ height: '100vh', maxWidth: '400px', margin: '0 auto' }}>\n\t\t\t\t\t<h4 className=\"mb-4\">Login</h4>\n\t\t\t\t\t{ error && <div className=\"alert alert-danger\" dangerouslySetInnerHTML={ createMarkup( error ) }/> }\n\t\t\t\t\t<form onSubmit={ onFormSubmit }>\n\t\t\t\t\t\t<label className=\"form-group\">\n\t\t\t\t\t\t\tUsername:\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\tvalue={ username }\n\t\t\t\t\t\t\t\tonChange={ handleOnChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<label className=\"form-group\">\n\t\t\t\t\t\t\tPassword:\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\t\t\tonChange={ handleOnChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<button className=\"btn btn-primary mb-3\" type=\"submit\">Login</button>\n\t\t\t\t\t\t{ loading && <img className=\"loader\" src={Loader} alt=\"Loader\"/> }\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}